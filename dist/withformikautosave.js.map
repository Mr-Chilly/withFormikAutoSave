{"version":3,"file":"withformikautosave.js","sources":["../src/withFormikAutoSave.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport isEqual from \"lodash.isequal\";\r\nimport { connect } from \"formik\";\r\n\r\nexport default function withFormikAutoSave(config) {\r\n  return function wrapperAutoSave(WrapperComponent) {\r\n    class ComponentWithAutoSave extends Component {\r\n      shouldComponentUpdate(nextProps) {\r\n        const { values } = this.props;\r\n        if (!isEqual(nextProps.values, values)) {\r\n          this.setState({ isAutoSaving: true, autoSaveError: undefined });\r\n\r\n          config\r\n            .onSave(nextProps.values, this.props)\r\n            .then(() =>\r\n              this.setState({\r\n                isAutoSaving: false,\r\n                lastAutoSaved: new Date()\r\n              })\r\n            )\r\n            .catch(err => this.setState({ autoSaveError: err }));\r\n          return true;\r\n        }\r\n        return false;\r\n      }\r\n\r\n      render() {\r\n        return <WrapperComponent {...this.props} {...this.state} />;\r\n      }\r\n    }\r\n    ComponentWithAutoSave.propTypes = {\r\n      values: PropTypes.object\r\n    };\r\n\r\n    return connect(ComponentWithAutoSave);\r\n  };\r\n}\r\n"],"names":["withFormikAutoSave","config","wrapperAutoSave","WrapperComponent","ComponentWithAutoSave","nextProps","values","props","isEqual","setState","isAutoSaving","autoSaveError","undefined","onSave","then","lastAutoSaved","Date","catch","err","React","state","Component","propTypes","PropTypes","object","connect"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKe,SAASA,kBAAT,CAA4BC,MAA5B,EAAoC;SAC1C,SAASC,eAAT,CAAyBC,gBAAzB,EAA2C;QAC1CC,qBAD0C;;;;;;;;;;;;;8CAExBC,SAFwB,EAEb;;;cACvBC,MADuB,GACZ,KAAKC,KADO,CACvBD,MADuB;;cAE3B,CAACE,OAAO,CAACH,SAAS,CAACC,MAAX,EAAmBA,MAAnB,CAAZ,EAAwC;iBACjCG,QAAL,CAAc;cAAEC,YAAY,EAAE,IAAhB;cAAsBC,aAAa,EAAEC;aAAnD;YAEAX,MAAM,CACHY,MADH,CACUR,SAAS,CAACC,MADpB,EAC4B,KAAKC,KADjC,EAEGO,IAFH,CAEQ;qBACJ,KAAI,CAACL,QAAL,CAAc;gBACZC,YAAY,EAAE,KADF;gBAEZK,aAAa,EAAE,IAAIC,IAAJ;eAFjB,CADI;aAFR,EAQGC,KARH,CAQS,UAAAC,GAAG;qBAAI,KAAI,CAACT,QAAL,CAAc;gBAAEE,aAAa,EAAEO;eAA/B,CAAJ;aARZ;mBASO,IAAP;;;iBAEK,KAAP;;;;iCAGO;iBACAC,6BAAC,gBAAD,eAAsB,KAAKZ,KAA3B,EAAsC,KAAKa,KAA3C,EAAP;;;;;MArBgCC,eADY;;IAyBhDjB,qBAAqB,CAACkB,SAAtB,GAAkC;MAChChB,MAAM,EAAEiB,SAAS,CAACC;KADpB;WAIOC,cAAO,CAACrB,qBAAD,CAAd;GA7BF;;;;;"}