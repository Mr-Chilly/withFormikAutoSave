{"version":3,"file":"withformikautosave.js","sources":["../src/withFormikAutoSave.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"formik\";\r\n\r\nexport default function withFormikAutoSave(config) {\r\n  return function wrapperAutoSave(WrapperComponent) {\r\n    class ComponentWithAutoSave extends Component {\r\n      shouldComponentUpdate(nextProps) {\r\n        const { values } = this.props;\r\n        if (nextProps.values !== values) {\r\n          this.setState({ isAutoSaving: true, autoSaveError: undefined });\r\n\r\n          config\r\n            .onSave(values, this.props)\r\n            .then(() =>\r\n              this.setState(() => ({\r\n                isAutoSaving: false,\r\n                lastAutoSaved: new Date()\r\n              }))\r\n            )\r\n            .catch(err => this.setState(() => ({ autoSaveError: err })));\r\n          return true;\r\n        }\r\n        return false;\r\n      }\r\n\r\n      render() {\r\n        return <WrapperComponent {...this.props} {...this.state} />;\r\n      }\r\n    }\r\n    ComponentWithAutoSave.propTypes = {\r\n      values: PropTypes.object,\r\n      onSave: PropTypes.func\r\n    };\r\n\r\n    return connect(ComponentWithAutoSave);\r\n  };\r\n}\r\n"],"names":["withFormikAutoSave","config","wrapperAutoSave","WrapperComponent","ComponentWithAutoSave","nextProps","values","props","setState","isAutoSaving","autoSaveError","undefined","onSave","then","lastAutoSaved","Date","catch","err","React","state","Component","propTypes","PropTypes","object","func","connect"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIe,SAASA,kBAAT,CAA4BC,MAA5B,EAAoC;SAC1C,SAASC,eAAT,CAAyBC,gBAAzB,EAA2C;QAC1CC,qBAD0C;;;;;;;;;;;;;8CAExBC,SAFwB,EAEb;;;cACvBC,MADuB,GACZ,KAAKC,KADO,CACvBD,MADuB;;cAE3BD,SAAS,CAACC,MAAV,KAAqBA,MAAzB,EAAiC;iBAC1BE,QAAL,CAAc;cAAEC,YAAY,EAAE,IAAhB;cAAsBC,aAAa,EAAEC;aAAnD;YAEAV,MAAM,CACHW,MADH,CACUN,MADV,EACkB,KAAKC,KADvB,EAEGM,IAFH,CAEQ;qBACJ,KAAI,CAACL,QAAL,CAAc;uBAAO;kBACnBC,YAAY,EAAE,KADK;kBAEnBK,aAAa,EAAE,IAAIC,IAAJ;iBAFH;eAAd,CADI;aAFR,EAQGC,KARH,CAQS,UAAAC,GAAG;qBAAI,KAAI,CAACT,QAAL,CAAc;uBAAO;kBAAEE,aAAa,EAAEO;iBAAxB;eAAd,CAAJ;aARZ;mBASO,IAAP;;;iBAEK,KAAP;;;;iCAGO;iBACAC,6BAAC,gBAAD,eAAsB,KAAKX,KAA3B,EAAsC,KAAKY,KAA3C,EAAP;;;;;MArBgCC,eADY;;IAyBhDhB,qBAAqB,CAACiB,SAAtB,GAAkC;MAChCf,MAAM,EAAEgB,SAAS,CAACC,MADc;MAEhCX,MAAM,EAAEU,SAAS,CAACE;KAFpB;WAKOC,cAAO,CAACrB,qBAAD,CAAd;GA9BF;;;;;"}